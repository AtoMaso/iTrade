


<div class="container col-md-12">

            <div class="row">
              <div class="col-md-2 textgray">
                <!-- this is ng2-table filtering section used but the rest of it is independent table done by me-->
                <span class="smalltextbold">Filter in all columns</span>
                <input *ngIf="config.filtering" placeholder="Filter" [ngTableFiltering]="config.filtering" (tableChanged)="onChangeTable(config)" class="form-control" />
              </div>

              <div class="col-md-2 textgray">
                <span class="smalltextbold">Items Per Page</span>
                <input type="number" min="1" max="{{recordsPerSet -1}}" [(ngModel)]="config.itemsPerPage" class="form-control">
              </div>

              <div class="col-md-2 textgray">
                <span class="smalltextbold">Current Page</span>
                <input type="number" min="1" [(ngModel)]="config.currentPage" class="form-control">
              </div>

              <div class="col-md-1 textgray">
                <span class="smalltextbold">Max Size</span>
                <input type="number" min="5" max="100" [(ngModel)]="maxSize" class="form-control">
              </div>

              <div class="col-md-2 textgray">
                <span class="smalltextbold">Records Per Set</span>
                <input type="number" min="5" max="500" [(ngModel)]="recordsPerSet" class="form-control">
              </div>

              <div class="col-md-2 col-md-offset-1 text-right">
                <br />             
                <div *ngIf="isAuthenticated">                 
                      <button class="btn btn-sm btn-success" (click)="addTrade()">
                        <span class="glyphicon glyphicon-plus-sign"></span>&nbsp;Add Trade
                      </button>
                </div>
              </div>
            </div>

            <br />

            <div class="row">

              <div class="table-responsive">

                      <table class="table table-bordered table-hover table-condensed">

                        <thead>
                          <tr>
                            <th class="col-md-1" style="vertical-align:middle;background-color:#FF223A3A">
                              <span style="vertical-align:middle;">
                                <a (click)="sortTable('tradeIdStr')" class="textgray text-uppercase buttonclass smalltextbold" style="width:auto">
                                  Id
                                  <span *ngIf="isIdAsc" class="glyphicon glyphicon-chevron-down"></span>
                                  <span *ngIf="!isIdAsc" class="glyphicon glyphicon-chevron-up"></span>
                                </a>
                              </span>
                            </th>


                            <th class="col-md-2" style="vertical-align:middle;background-color:#FF223A3A">
                              <span style="vertical-align:middle;margin-left:10px;">
                                    <a (click)="sortTable('tradeObjectDescription')" class="textgray text-uppercase buttonclass smalltextbold" style="width:auto">Trading
                                      <span *ngIf="isTitleAsc" class="glyphicon glyphicon-chevron-down"></span>
                                      <span *ngIf="!isTitleAsc" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                              </span>
                            </th>


                            <th class="col-md-2" style="vertical-align:middle;background-color:#FF223A3A">
                              <span style="vertical-align:middle;margin-left:10px;">
                                <a (click)="sortTable('tradeForObjectsDescription')" class="textgray text-uppercase buttonclass smalltextbold" style="width:auto">
                                  For
                                  <span *ngIf="isTitleForAsc" class="glyphicon glyphicon-chevron-down"></span>
                                  <span *ngIf="!isTitleForAsc" class="glyphicon glyphicon-chevron-up"></span>
                                </a>
                              </span>
                            </th>

                            <th class="col-md-2" style="vertical-align:middle;background-color:#FF223A3A">
                              <span style="vertical-align:middle">
                                        <a (click)="sortTable('tradeObjectCategoryDescription')" class="textgray text-uppercase buttonclass smalltextbold" style="width:auto">Category
                                            <span *ngIf="isCategoryAsc" class="glyphicon glyphicon-chevron-down"></span>
                                            <span *ngIf="!isCategoryAsc" class="glyphicon glyphicon-chevron-up"></span>
                                      </a>
                              </span>
                            </th>
                            <th class="col-md-3" style="vertical-align:middle;background-color:#FF223A3A">
                                <span style="vertical-align:middle">
                                        <a (click)="sortTable('traderFullName')" class="textgray text-uppercase buttonclass smalltextbold" style="width:auto">Trader
                                          <span *ngIf="isNameAsc" class="glyphicon glyphicon-chevron-down"></span>
                                          <span *ngIf="!isNameAsc" class="glyphicon glyphicon-chevron-up"></span>
                                        </a>
                                </span>
                            </th>
                            <th class="col-md-2" style="vertical-align:middle;background-color:#FF223A3A">
                              <span style="vertical-align:middle">
                                    <a (click)="sortTable('tradeDatePublished')" class="textgray text-uppercase buttonclass  smalltextbold" style="width:auto">Published
                                      <span *ngIf="isPublishedAsc" class="glyphicon glyphicon-chevron-down"></span>
                                      <span *ngIf="!isPublishedAsc" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                              </span>
                            </th>
                            <th class="col-md-2  textgray text-uppercase smalltextbold text-center" style="vertical-align:middle;background-color:#FF223A3A">Actions</th>
                          </tr>
                        </thead>



                        <tr *ngFor="let trade of rows  | paginate:config ">

                  
                          <td class="col-md-1 smalltext text-uppercase text-info" style="vertical-align:middle">{{ trade.tradeId  }}</td>

                          <td class="col-md-2" style="vertical-align:middle">
                            <a [routerLink]="['/tradedetails']" [queryParams]="{id: trade.tradeId}" class="smalltext text-uppercase textlightcoral">{{ trade.tradeObjectDescription  }}</a>
                          </td>

                          <td class="col-md-2 smalltext text-uppercase text-info" style="vertical-align:middle"> {{ trade.tradeForObjectsDescription  }}</td>

                          <td class="col-md-2 smalltex text-uppercase text-info" style="vertical-align:middle">{{ trade.tradeObjectCategoryDescription  }}</td>

                          <td class="col-md-3" style="vertical-align:middle">
                            <a [routerLink]="['/traderdetails']" [queryParams]="{id: trade.traderId}" class="smalltext text-uppercase textlightcoral">{{ trade.traderFullName }}</a>
                          </td>

                          <td class="col-md-2 smalltext text-uppercase text-info" style="vertical-align:middle">{{ trade.tradeDatePublished | date }}</td>


                          <td class="col-md-2 text-center" style="vertical-align:middle;">

                            <button *ngIf="!isAuthenticated" type="button" data-target="#addremoveLogin" data-toggle="modal" class="btn btn-sm btn-danger">
                              <span class="glyphicon glyphicon-trash"></span>&nbsp; Remove Trade

                            </button>

                            <div *ngIf="isAuthenticated">
                              <!--<a *ngIf="!isAllowedToRemoveTrade" href="#removeDialog" class="btn btn-sm btn-danger smalltextbold" data-toggle="modal">
                                <span class="glyphicon glyphicon-trash"></span>&nbsp; Remove Trade
                              </a>-->
                              <button type="button" data-target="#removeAllowed" data-articleid=(trade.tradeId) data-toggle="modal"
                                      class="btn btn-sm btn-danger smalltextbold" (click)="passToModal(trade)">
                                <span class="glyphicon glyphicon-trash"></span>&nbsp; Remove Trade
                              </button>
                            </div>

                          </td>
                        </tr>

                      </table>
              
              </div>
   
        </div>         
  
  
  
          <div class="row col-md-12">
                <div class="col-md-5">
                      <!--the stylesheet of the pagination is overwritten in the host component sass -->
                      <pagination-controls id="pagination" *ngIf="config.paging"
                                           (pageChange)="onPageChange($event)"
                                           maxSize="9"
                                           directionLinks="false"
                                           autoHide="true"
                                           previousLabel="Previous"
                                           nextLabel="Next"
                                           screenReaderPaginationLabel="Pagination"
                                           screenReaderPageLabel="page"
                                           screenReaderCurrentLabel="You're on page"
                                           [(ngModel)]="config.currentPage"
                                           (numPages)="numPages = $event"
                                           [maxSize]="maxSize">
                      </pagination-controls>
                </div>
                <div class="col-md-2 textgray">
                        <span class="smalltextbold">Set of records: {{setsCounter }} of {{ totalNumberOfSets}}</span>
                </div>
                <div class="col-md-3 col-md-offset-2">
                        <button *ngIf="isNextButton" (click)="nextSetOfRecords()" class="btn btn-success btn-sm smalltextbold">Next Set</button>
                        <button *ngIf="isPrevButton" (click)="previousSetOfRecords()" class="btn btn-success btn-sm smalltextbold">Previous Set</button>
                </div>
          </div> 
</div>


  <my-spinner [isRunning]="isRequesting"></my-spinner>




<!-- MODAL form to show when ADD/REMOVE trade is clicked and user is NOT LOGGED IN -->
<div class="modal fade" id="addremoveLogin" tabindex="-1" role="dialog" aria-labelledby="AddRemoveLogin">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <!-- this will introduce a x button in the corner of the modal dialog which can be used to close the dialog box -->
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <h4 class="text-warning"><span><i class="glyphicon glyphicon-exclamation-sign"></i></span>&nbsp;Login Warning!</h4>
        <!--<h5 class="modal-title text-warning" id="AddRemoveLogin">Login Dialog</h5>-->
      </div>

      <div class="modal-body text-warning">
        <p>You need to login to do that action. Do you want to log-in/sign-in?</p>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal">No</button>
        <button class="btn btn-success" [routerLink]="['/login']" data-dismiss="modal">Yes</button>
      </div>

    </div>
  </div>
</div>
<!-- MODAL end of modal form -->


<!-- MODAL form to show it when ADD trade is clicked -and user NOT ALLOWED -->
<div class="modal" id="addDialog" [hidden]="hideModal" tabindex="-1" role="dialog" aria-labelledby="AddWarning">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- this will introduce a x button in the corner of the modal dialog which can be used to close the dialog box -->
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <h4 *ngIf="!isAllowed" class="text-warning"><span><i class="glyphicon glyphicon-exclamation-sign"></i></span>&nbsp;Add Trade Warning!</h4>
        <!--<h4 class="modal-title" id="AddWarning">Add Trade Warning</h4>-->
      </div>
      <div *ngIf="!isAllowed" class="modal-body text-warning">
        <p>You have no privileges to add new trade!</p>
      </div>
      <div *ngIf="!isAllowed" class="modal-footer">
        <button class="btn btn-warning" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL end of modal form -->



<!-- MODAL form to show it when REMOVE trade is clicked when user NOT ALLOWED -->
<div class="modal" id="removeDialog" tabindex="-1" role="dialog" aria-labelledby="RemoveWarning">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- this will introduce a x button in the corner of the modal dialog which can be used to close the dialog box -->
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <h4 *ngIf="!isAllowed" class="text-warning"><span><i class="glyphicon glyphicon-exclamation-sign"></i></span>&nbsp;Remove Trade Warning!</h4>
        <!--<h4 class="modal-title" id="RemoveWarning"> Remove Trade Warning</h4>-->
      </div>
      <div *ngIf="!isAllowed" class="modal-body text-warning">
        <p>You have no privileges to remove the trade!</p>
      </div>
      <div *ngIf="!isAllowed" class="modal-footer">
        <button class="btn btn-warning" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL end of modal form -->



<!-- MODAL form to show it when REMOVE trade is clicked when user IS ALLOWED -->
<div class="modal fade" id="removeAllowed" tabindex="-1" role="dialog" aria-labelledby="Remove">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <!-- this will introduce a x button in the corner of the modal dialog which can be used to close the dialog box -->
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <h4 class="text-warning"><span><i class="glyphicon glyphicon-exclamation-sign"></i></span>&nbsp;Remove Trade Warning!</h4>
        <!--<h5 class="modal-title text-warning" id="Remove">Remove Trade Warning</h5>-->
      </div>

      <div class="modal-body text-warning">
        <div *ngIf="isOwner"><p>Are you sure you want to delete this trade? All associated images will also be deleted!</p></div>
        <div *ngIf="!isOwner"><p>Only the owner of the trade can delete the trade!</p></div>
      </div>

      <div class="modal-footer">
        <div *ngIf="!isOwner">
          <button class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        <div *ngIf="isOwner">
          <button class="btn btn-danger" data-dismiss="modal">No</button>
          <button class="btn btn-success" (click)="removeTrade(tradeIdToBeRemoved)" data-dismiss="modal">Yes</button>
        </div>
      </div>

    </div>
  </div>
</div>

