<div class="container col-md-12">

      <div class="row">


          <div class="col-md-3">

              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Status:<span class="smalltext  text-uppercase text-info"> {{ trade.tradeStatus }}</span>
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Trading:<span class="smalltext  text-uppercase text-info"> {{ trade.tradeObjectDescription }}</span>
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading">
                                      
                      <span class="description panel-title collapsed smalltext text-uppercase textlightcoral" data-toggle="collapse" data-target="#collapseDescription">
                        <span class="glyphicon glyphicon-plus"></span> Trade Description
                      </span>
                           
                  <!-- colapsable description -->
                    <div id="collapseDescription" class="collapse smalltext textgray">

                        <div class="panel-heading">                         
                           This is a description of the object above in this  case is a sheet.<br/>
                           Coton 100% not used in the original packaging.<br/>
                           Will trade for similar stuff.<br />                                       
                        </div>
                  </div>

                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Trading for:<span class="smalltext  text-uppercase text-info"> {{ trade.tradeForObjectsDescription }}</span>
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Category: <span class="smalltext text-uppercase text-info"> {{ trade.tradeObjectCategoryDescription }}</span> 
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Date Published: <span class="smalltext text-uppercase text-info"> {{ trade.tradeDatePublished | date }}</span> 
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12">
                  Trader: <span class="textlightcoral">
                            <a [routerLink]="['/traderdetails']" [queryParams]="{id: trade.traderId}" class="smalltext textlightcoral text-uppercase"><span> <i>{{ trade.traderFullName }}</i></span></a>
                      </span> 
                </div>
              </div>


              <div class="row">
                <div class="panel panel-heading col-md-12" style="text-align:center;">

                  <div *ngIf="!isAuthenticated">                   
                    <button type="button" data-target="#addremoveLogin" data-toggle="modal" class="btn btn-danger btn-sm smalltextbold" style="width:200px"> Start Trading </button>                                                
                  </div>

                  <div *ngIf="isAuthenticated">
                    <button type="button" [routerLink]="['/correspondence']" [queryParams]="{id: trade.tradeId}" class="btn btn-danger btn-sm smalltextbold" style="width:200px"> Start Trading</button>                    
                  </div>

                </div>
            </div>

         </div>


          <div class="col-md-8 col-md-offset-1 panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      

                <div class="row panel panel-heading">

                  <span class="images panel-title collapsed smalltext text-uppercase textlightcoral" data-toggle="collapse" data-target="#collapseImages">
                    <span class="glyphicon glyphicon-minus"></span> Trade Images
                 </span>             

                  <!-- collapsable trade images -->
                  <div id="collapseImages" class="collapse in">
          
                      <div class="container panel panel-heading col-md-12">

                        <div class="col-md-4">
                          <div *ngIf="hasImages">
                            <img src="{{ images[0].imageUrl }}" alt="" style="height: 250px;width: 250px;">
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div *ngIf="hasImages">
                            <img src="{{ images[1].imageUrl }}" alt="" style="height: 250px;width: 250px;">
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div *ngIf="hasImages">
                            <img src="{{ images[2].imageUrl }}" alt="" style="height: 250px;width: 250px;">
                          </div>
                        </div>

                      </div>

                  </div>
       
                </div>
      

                <div class="row panel panel-heading">     

                  <span class="history panel-title collapsed smalltext text-uppercase textlightcoral" data-toggle="collapse" data-target="#collapseHistory">
                    <span class="glyphicon glyphicon-minus"></span> This Trade History
                  </span>

                   <!-- collapsable trade history , history will minimum one record when trade is created-->
                   <div id="collapseHistory" class="collapse in">

                      <div class="panel-heading">
                        
                        <!-- Table -->
                        <div class="row">

                          <div class="table-responsive">

                            <table class="table table-bordered table-hover">

                              <!-- Table header -->
                              <thead>
                                <tr>
                                  <th class="col-md-1" style="background-color:#FF223A3A">
                                    <span  class="text-uppercase textgray smalltext" style="vertical-align:middle;width:auto;">Id</span>                                 
                                  </th>

                                  <th class="col-md-2" style="background-color:#FF223A3A">
                                    <span class="text-uppercase textgray smalltext" style="vertical-align:middle;width:auto;">Trade Id</span>                                                                                                                                                                                 
                                  </th>

                                  <th class="col-md-2" style="background-color:#FF223A3A">                                    
                                    <a (click)="sortTable('createdDate')" class="text-uppercase buttonclass textgray smalltext" style="width:auto">
                                     Created Date
                                      <span *ngIf="isDateAsc" class="glyphicon glyphicon-chevron-down"></span>
                                      <span *ngIf="!isDateAsc" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>                                                                                                                                                             
                                  </th>

                                  <th class="col-md-2" style="background-color:#FF223A3A">                                 
                                    <a (click)="sortTable('status')" class="text-uppercase buttonclass textgray smalltext" style="width:auto">
                                     Action
                                      <span *ngIf="isStatusAsc" class="glyphicon glyphicon-chevron-down"></span>
                                      <span *ngIf="!isStatusAsc" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>                             
                                  </th>
                                                               
                                </tr>
                              </thead>

                              <!-- Table rows-->
                              <tr *ngFor="let history of historyrows | paginate:config ">

                                <td class="col-md-1 smalltext text-capitalize textgray">{{ history.historyId  }}</td>
                               
                                <td class="col-md-2 smalltext text-capitalize textgray "> {{ history.tradeId }}</td>

                                <td class="col-md-2 smalltext text-capitalize textgray ">{{ history.createdDate | date  }}</td>

                                <td class="col-md-2 smalltext text-capitalize textgray">{{ history.status}}</td>
                              </tr>

                            </table>

                          </div>

                        </div>

                        <!-- Table navigation -->
                        <div class="row col-md-12">

                          <div class="col-md-5">
                            
                            <pagination-controls id="pagination" *ngIf="config.paging"
                                                 (pageChange)="onPageChange($event)"
                                                 maxSize="5"
                                                 directionLinks="false"
                                                 autoHide="true"
                                                 previousLabel="Previous"
                                                 nextLabel="Next"
                                                 screenReaderPaginationLabel="Pagination"
                                                 screenReaderPageLabel="page"
                                                 screenReaderCurrentLabel="You're on page"
                                                 [(ngModel)]="config.currentPage"
                                                 (numPages)="numPages = $event"
                                                 [maxSize]="maxSize">
                            </pagination-controls>

                          </div>                      
                        </div>


                      </div>
                    </div>

              </div>

        </div>


      </div>

</div>


<my-spinner [isRunning]="isRequesting"></my-spinner>


<!-- MODAL form to show when add/remove trade is clicked and user is not logged in-->
<div class="modal fade" id="addremoveLogin" tabindex="-1" role="dialog" aria-labelledby="AddRemoveLogin">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <!-- this will introduce a x button in the corner of the modal dialog which can be used to close the dialog box -->
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <h4 class="text-warning"><span><i class="glyphicon glyphicon-exclamation-sign"></i></span>&nbsp;Warning!</h4>
      </div>

      <div class="modal-body text-warning">
        <p>You need to be logged in to do this action. Do you want to log in?</p>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal">No</button>
        <button class="btn btn-success" [routerLink]="['/login']" data-dismiss="modal">Yes</button>
      </div>

    </div>
  </div>
</div>
